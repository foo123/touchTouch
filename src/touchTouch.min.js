/**
*  touchTouch.js
*  Vanilla JavaScript version of https://github.com/tutorialzine/touchTouch Optimized Mobile Gallery by Martin Angelov
*  @VERSION: 1.1.0
*  @license: MIT License
*
*  https://github.com/foo123/touchTouch
*
**/
!function(){"use strict";var n="$tT",a=null,t=/^\s+|\s+$/g,i=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(t,"")};function r(){var t=!1,e={};try{Object.defineProperty(e,"passive",{get:function(){return!(t=!0)}}),window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}function u(e,t,n,i){null==a&&(a=r()),e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,a?i:"object"==typeof i?!!i.capture:!!i)}function s(e,t,n,i){null==a&&(a=r()),e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,a?i:"object"==typeof i?!!i.capture:!!i)}function p(e,t){e.classList?e.classList.add(t):e.className=""===e.className?t:e.className+" "+t}function e(e,t){e.classList?e.classList.remove(t):e.className=i((" "+e.className+" ").replace(" "+t+" "," "))}function d(e){return e[n]=e[n]||{},e[n].display=e.style.getPropertyValue("display"),""===e[n].display&&(e[n].display=null),e.style.display="none",e}window.Element&&!Object.prototype.hasOwnProperty.call(window.Element.prototype,n)&&(window.Element.prototype[n]=null);var f=null,v=null,h=null,m=null,c=!1,y=null;function g(e){var t;c||("none"===(t=f).style.display&&(t.style.display=t[n]&&t[n].display?t[n].display:"block"),E(e),setTimeout(function(){p(f,"visible")},0),c=!0)}function w(){c&&(e(d(f),"visible"),c=!1)}function E(e){v.style.left=String(100*-e)+"%"}function o(a){f||v||(f=document.createElement("div"),v=document.createElement("div"),h=document.createElement("a"),m=document.createElement("a"),f.id="galleryOverlay",v.id="gallerySlider",h.id="prevArrow",m.id="nextArrow","ontouchstart"in window&&p(f,"is-touch-screen"),document.body.appendChild(d(f)),f.appendChild(v),f.appendChild(h),f.appendChild(m));var r,n=0;a=Array.prototype.slice.call(a||[]),r=a.map(function(e,t){var n;return t>=v.children.length?(p(n=document.createElement("div"),"placeholder"),v.appendChild(n)):(n=v.children[t]).textContent="",n}),u(v,"click",function(e){"img"!==e.target.tagName.toLowerCase()&&w()},{passive:!0,capture:!1}),u(h,"click",function(e){e.preventDefault&&e.preventDefault(),l()},{passive:!1,capture:!1}),u(m,"click",function(e){e.preventDefault&&e.preventDefault(),o()},{passive:!1,capture:!1}),u(window,"keydown",function(e){27===e.keyCode?w():37===e.keyCode?l():39===e.keyCode&&o()},{passive:!0,capture:!1}),u(document.body,"touchstart",function(e){if("img"!==e.target.tagName.toLowerCase()||!function(e,t){if(e.closest)return e.closest("#"+t);for(;e;){if(t===e.id)return e;e=e.parentNode}}(e.target,"gallerySlider"))return!1;var n=e,i=n.changedTouches[0].pageX;return u(v,"touchmove",y=function e(t){t.preventDefault&&t.preventDefault(),10<(n=t.touches[0]||t.changedTouches[0]).pageX-i?(s(v,"touchmove",e,{passive:!1,capture:!1}),l()):n.pageX-i<-10&&(s(v,"touchmove",e,{passive:!1,capture:!1}),o())},{passive:!1,capture:!1}),!1},{passive:!0,capture:!1}),u(document.body,"touchend",function(){y&&s(v,"touchmove",y,{passive:!1,capture:!1})},{passive:!0,capture:!1}),a.forEach(function(e,t){u(e,"click",function(e){e.preventDefault&&e.preventDefault(),g(n=t),c(n),i(n+1),i(n-1)},{passive:!1,capture:!1})});var i=function(e){if(e<0||e>=a.length)return!1;setTimeout(function(){c(e)},1e3)},c=function(e){if(e<0||e>=a.length)return!1;var t,n,i;r[e].children.length||(t=a[e].href,n=function(){r[e].textContent="",r[e].appendChild(this)},u(i=document.createElement("img"),"load",function e(){s(i,"load",e),p(i,i.height>i.width?"is-portrait":i.height===i.width?"is-square":"is-landscape"),n.call(i)}),i.src=t)},o=function(){n+1<a.length?(E(++n),i(n+1)):(p(v,"rightSpring"),setTimeout(function(){e(v,"rightSpring")},500))},l=function(){0<n?(E(--n),i(n-1)):(p(v,"leftSpring"),setTimeout(function(){e(v,"leftSpring")},500))}}o.VERSION="1.1.0",window.touchTouch=o}();